{% extends "ml_fraudulent_app/admin/base_site.html" %}
{% load i18n static %}
{% load admin_menu %}

{% block extrastyle %}
{{ block.super }}
<!-- <link rel="stylesheet" type="text/css" href="{% static 'admin/css/dashboard.css' %}" /> -->
{% endblock %}
{{ value|date:"Y-m-d H:m:s" }}

{% block coltype %}colMS{% endblock %}

{% block bodyclass %}{{ block.super }} dashboard{% endblock %}
{% if not is_popup %}
{% block breadcrumbs %}
<link rel="stylesheet" type="text/css"
href="{% static 'ml_fraudulent_app/admin/css/custom.css' %}" />

<div class="row mb-2">
    <div class="col-sm-4">
        <h2>{{title}}</h2>
    </div>
    <div class="col-sm-8">
        <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="#"><i class="fas fa-tachometer-alt"></i> {% trans 'Home' %}</a></li>
            {% for app in app_list %}
            <li class="breadcrumb-item active">{{ app.name }}</li>
            {% endfor %}
        </ol>
    </div>
</div>
{% endblock %}
{% endif %}

<!-- main Code start Here -->
{% block content %}
<section class="content">
    <div class="container-fluid">
      <!-- Small boxes (Stat box) -->
      <div class="row">

      <!-- ./col -->
<div class="col-lg-3 col-2">
    <div class="small-box bg-success">
        <div class="inner">
           <h3>53<sup style="font-size: 20px"></sup></h3>
             <div class="progress">
                <div class="progress-bar" role="progressbar" style="width:20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"> </div>
             </div>
                <p>Low Risk</p>
            </div>
            <div class="icon">
                <i class="far fa-bookmark"></i>  
        </div>
    </div>
</div>
 <!-- ./col -->
<div class="col-lg-3 col-2">
    <!-- small box -->
    <div class="small-box bg-light">
      <div class="inner">
        <h3 style="color:#ffffff;">102</h3>
       
            <div class="progress">
                <div class="progress-bar" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <p style="color:#ffffff;">Medium Risk</p>
      </div>
            <div class="icon">
                <i class="far fa-bell"></i>
            </div>
    </div>
</div>

<div class="col-lg-3 col-2">
    <div class="small-box bg-white"> 
        <div class="inner">
           <h3 style="color:#ffffff;">63<sup style="font-size: 20px"></sup></h3>
             <div class="progress">
                <div class="progress-bar" role="progressbar" style="width:60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"> </div>
             </div>
             <p style="color:#ffffff;">High Risk</p>
            </div>
            <div class="icon">
                <i class="fas fa-biohazard"></i>    
        </div>
    </div>
</div>

<div class="col-lg-3 col-2">
    <div class="small-box bg-danger">
        <div class="inner">
           <h3>88<sup style="font-size: 20px"></sup></h3>
             <div class="progress">
                <div class="progress-bar" role="progressbar" style="width:80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"> </div>
             </div>
                <p>Critical Risk</p>
            </div>
            <div class="icon">
                <i class="fas fa-exclamation-triangle"></i>  
        </div>
    </div>
</div>
</div>
</div>
</section>

<!-- Boxes code end here-->
<div class="container">
   
    <!--<button type="button" name="analyse" class="btn btn-success" >Analyze</button> -->
    <table class="table table-hover" id="usersData">
        <thead>
          <tr>
            <th>ID</th>
            <th>Applicant Name</th>
            <th>SSN</th>
            <th>Origin IP </th>
            <th>Classification </th>
            <th>Risk Score </th>
            <th class="disableFilterBy">Action</th>
          </tr>
        </thead>
        <tbody>
           
        {% for app in applicant_details %} 
        
       
          <tr>
            <td>{{app.app_id}}</td> 
            <td>{{app.applicant_name}}</td>
            <td>{{app.app_ssn}}</td>
            <td>{{app.origin_ip}}</td>
            <td>{{app.classification}}</td>
            <td>{{app.AI_prediction}}</td>
            <td> 
                <a href="#editApplicantModal-{{forloop.counter}}" class="btn btn-info btn-sm" data-toggle="modal"><i class="fas fa-user-edit"></i>&nbsp Review</a>         
                 </td>
          </tr>
          {% endfor %} 
        </tbody>
    </table>

{% for app in applicant_details %}
<!-- Modal -->
<div class="modal fade" id="editApplicantModal-{{forloop.counter}}" role="dialog">
    <div class="modal-dialog modal-lg">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">Applicant Details</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
            <form action="/applicantUpdate/{{app.app_id}}" id="userInserUpdateForm" name="userInserUpdateForm" class="form-horizontal" method="POST">
                {% csrf_token %}
                <input type="hidden" name="app_id" id="app_id" value={{app.app_id}}>

                <div class="form-group">
                <label for="name" class="col-sm-6 control-label">Start Time</label>
                <div class="col-sm-12">
                <input type="text" class="form-control" id="app_start_time" name="app_start_time" value="{{app.app_start_time | date:"Y-m-d H:m:s"}}">
                </div>
                </div>

                <div class="form-group">
                <label for="name" class="col-sm-6 control-label">End Time</label>
                <div class="col-sm-12">
                <input type="text" class="form-control" id="app_submission_time" name="app_submission_time" value="{{app.app_submission_time | date:"Y-m-d H:m:s"}}">
                </div>
                </div>

                <div class="form-group">
                <label for="name" class="col-sm-6 control-label">Full Name</label>
                <div class="col-sm-12">
                <input type="text" class="form-control" id="applicant_name" name="applicant_name" placeholder="Enter Name" value="{{app.applicant_name}}" maxlength="50" required="">
                </div>
                </div> 

                <div class="form-group">
                <label for="name" class="col-sm-2 control-label">Email</label>
                <div class="col-sm-12">
                <input type="text" class="form-control" id="app_email" name="app_email" placeholder="Enter Email" value="{{app.app_email}}" maxlength="50" required="">
                </div>
                </div>

                <div class="form-group">
                <label class="col-sm-2 control-label">Phone</label>
                <div class="col-sm-12">
                <input type="text" class="form-control" id="app_onphone" name="app_onphone" placeholder="Enter Phone" value="{{app.app_onphone}}" required="">
                </div>
                </div>
                    
                <div class="form-group">
                <label class="col-sm-2 control-label">SSN</label>
                <div class="col-sm-12">
                <input type="text" class="form-control" id="app_ssn" name="app_ssn" placeholder="Enter SSN" value="{{app.app_ssn}}" required="">
                </div>                    
                </div>

                <div class="form-group">
                <label class="col-sm-2 control-label">Address</label>
                <div class="col-sm-12">
                    <textarea class="form-control" id="app_mailing" name="app_mailing" placeholder="Enter Address" required>{{app.app_mailing}}</textarea>
                </div>
                </div>

                <div class="form-group">
                <label class="col-sm-2 control-label">Renter </label>
                <div class="col-sm-12">
                <input type="text" class="form-control" id="renter" name="renter" placeholder="Enter Renter" value="{{app.renter}}" required="">
                </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-6 control-label">Unit Type</label>
                    <div class="col-sm-12">
                    <input type="text" class="form-control" id="unit_type" name="unit_type" placeholder="Enter Unit Type" value="{{app.unit_type}}" required="">
                    </div>
                    </div>
                    
                    <div class="form-group">
                    <label class="col-sm-6 control-label">Requested Amount</label>
                    <div class="col-sm-12">
                    <input type="text" class="form-control" id="requested_amount" name="requested_amount" placeholder="Enter Requested Amount" value="{{app.requested_amount}}" required>
                    </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-6 control-label">Origin IP</label>
                        <div class="col-sm-12">
                        <input type="text" class="form-control" id="origin_ip" name="origin_ip" value="{{app.origin_ip}}">
                        </div>
                        </div>
    

                    <div class="form-group">
                    <label class="col-sm-2 control-label">Classification</label>
                    <div class="col-sm-12">
                    <select class="custom-select" style="width:250px;" name="classification" id="classification">
                        <option value="Fraud">Fraud</option>
                        <option value="Not_Fraud">Not Fraud</option>
                    </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-6 control-label">Risk Score</label>
                    <div class="col-sm-12">
                    <input type="text" class="form-control" id="AI_prediction" name="AI_prediction" value="{{app.AI_prediction}}" required>
                    </div>
                    </div>
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-primary" id="btn-save" name= "Submit" value="addNewUser">Save Changes
                    </button>
                    </div>


            </form>


        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  {% endfor %}



</div>


{% endblock %}
   
{% block javascript %}
{% include 'ml_fraudulent_app/adminlte/lib/_scripts.html' %}
<script>
  $(document).ready(function(){
	// Activate tooltip
	$('[data-toggle="tooltip"]').tooltip();
	
	// Select/Deselect checkboxes
	var checkbox = $('table tbody input[type="checkbox"]');
	$("#selectAll").click(function(){
		if(this.checked){
			checkbox.each(function(){
				this.checked = true;                        
			});
		} else{
			checkbox.each(function(){
				this.checked = false;                        
			});
		} 
	});
	checkbox.click(function(){
		if(!this.checked){
			$("#selectAll").prop("checked", false);
		}
	});
});

$(document).ready( function () {
    $('#usersData').DataTable();
} );

  </script>
{% endblock %} 







